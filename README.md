# market-place
An Ethereum based online market place application


Installation steps for Ubuntu:

1) Install node.js
$ curl -sL https://deb.nodesource.com/setup_10.x | sudo -E bash 
$ sudo apt-get install -y nodejs

2) Install build tools (without them you will get an error when running npm install with node-gyp)
$ sudo apt-get install build-essential

3) Install Truffle
$ sudo npm install -g truffle

4) Install Ganache (or the application) and run it:
$ sudo npm install -g ganache-cli
$ ganache-cli

5) Deploy the contract (by default on Ganache)
$ truffle migrate
 
6) Create the app directory
$ mkdir dapps && cd dapps

7) Clone
$ git clone "https://github.com/ren06/market-place.git"

8) Install dependencies
$ npm install

9) Run the Vue.js app:
$ run npm dev

10) Interact with the app at localhost:8080

Import a few accounts into your Metamask to simulate different users (Admin, Store Owner, User)

If you're testing locally with Ganache don't forget to clear the transaction history of Metamask (otherwise you will get an error about the wrong nonce)

Note: if you want to have some data already created, copy the files in "migrations_data" into "migration". Don't do this if you want to run unit tests. Bear in mind that executing these migration may create unexpected behaviour when running unit tests (the unit tests are run after the migrations)

TESTING
*******
Test the contract MarketPlace with:
$ truffle test

It covers all the functions of the MarketPlace contract. It uses some methods to display the current state of the contract, to list all administrators, store owners, products (for a store owner) which can be useful for troubleshooting.

 
IFPS
*****
I tried to deploy on IPFS but there seem to be a webpack problem. Some js files are not found
It's accessible at: ............
Here are the steps:

First we nned to build the Vue.js app to generate the files to share via IFPS
$ npm run build

Installing IPFS:
$ tar xvfz go-ipfs.tar.gz
$ cd go-ipfs
$ ./install.sh

Launch the daemon
$ ipfs daemon

In another terminal:
$ ipfs swarm peers

Add the dist folder generated during te build
$ ipfs add -r dist/

Copy that last hash and execute:
$ ipfs name publish Qm............. (last hash generated by previous command)

The data is accessible via gateway.ipfs.io/ipns/Qm.............

ipfs add -r dist/


RINKEBY
******
By running
$ truffle migrate --network rinkeby 
the contracts will be deployed to this Rinkeby network. It's using an account whose seed words are specified in mnemonic.js (please don't empty the account with lots of deployments!)

You can access the contract on Rinkeby at https://rinkeby.etherscan.io/address/0xf95baa735f7e941d4e2575b18eb236987793b7fb (it was deployed using Truffle and Infura with the help of the module truffle-hdwallet-provider)

